function processData() {
    const raw = document.getElementById("rawText").value.trim();
    const lines = raw.split("\n");

    const tableBody = document.querySelector("#resultTable tbody");
    tableBody.innerHTML = "";

    lines.forEach(line => {
        const parts = line.trim().split(/\s+/);

        // ถ้าแยกได้ข้อมูลครบตามตำแหน่ง
        if (parts.length >= 7) {
            const no = parts[0];
            const day = parts[1];
            const month = parts[2];
            const year = parts[3];
            const time = parts[4] + " " + parts[5]; // เช่น "01:15 น."

            const id = parts[6];

            // ส่วนที่เหลือคือ ชื่อ + อีเมล + หมายเหตุ
            let name = "";
            let email = "";
            let note = "-";

            const rest = parts.slice(7);
            rest.forEach(p => {
                if (p.includes("@")) {
                    email = p;
                } else if (p === "-") {
                    note = p;
                } else {
                    name += (name ? " " : "") + p;
                }
            });

            const date = `${day} ${month} ${year}`;

            // ใส่ข้อมูลลงตาราง
            const tr = document.createElement("tr");
            [no, date, time, id, name, email, note].forEach(val => {
                const td = document.createElement("td");
                td.textContent = val;
                tr.appendChild(td);
            });

            tableBody.appendChild(tr);
        }
    });
}
